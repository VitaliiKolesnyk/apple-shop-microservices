{"ast":null,"code":"import { inject } from '@angular/core';\nimport { OidcSecurityService } from 'angular-auth-oidc-client';\nimport { BehaviorSubject } from 'rxjs';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/router\";\nconst _c0 = () => [\"/products\"];\nconst _c1 = () => [\"/orders\"];\nconst _c2 = () => [\"/inventory\"];\nfunction SidebarComponent_li_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 3);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 4);\n    i0.ɵɵelement(3, \"path\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"span\", 6);\n    i0.ɵɵtext(5, \"Manage Orders\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c1));\n  }\n}\nfunction SidebarComponent_li_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 3);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 4);\n    i0.ɵɵelement(3, \"path\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"span\", 6);\n    i0.ɵɵtext(5, \"Inventory\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c2));\n  }\n}\nfunction SidebarComponent_li_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 10);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 4);\n    i0.ɵɵelement(3, \"path\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"span\", 6);\n    i0.ɵɵtext(5, \"Open API Docs\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction SidebarComponent_li_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 11);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 4);\n    i0.ɵɵelement(3, \"path\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"span\", 6);\n    i0.ɵɵtext(5, \"Kafka UI\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction SidebarComponent_li_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 12);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 4);\n    i0.ɵɵelement(3, \"path\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"span\", 6);\n    i0.ɵɵtext(5, \"Grafana\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction SidebarComponent_li_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 13);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 4);\n    i0.ɵɵelement(3, \"path\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"span\", 6);\n    i0.ɵɵtext(5, \"Jenkins\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction SidebarComponent_li_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 14);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 4);\n    i0.ɵɵelement(3, \"path\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"span\", 6);\n    i0.ɵɵtext(5, \"Keycloak\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nexport let SidebarComponent = /*#__PURE__*/(() => {\n  class SidebarComponent {\n    oidcSecurityService = inject(OidcSecurityService);\n    userRoles = [];\n    rolesSubject = new BehaviorSubject([]);\n    constructor() {\n      // Subscribe to isAuthenticated$ to track when user is authenticated\n      this.oidcSecurityService.isAuthenticated$.subscribe(isAuthenticated => {\n        if (isAuthenticated) {\n          this.loadRoles();\n        }\n      });\n    }\n    ngOnInit() {\n      // Check if the page was already reloaded\n      if (!localStorage.getItem('reloaded')) {\n        localStorage.setItem('reloaded', 'true'); // Set the reload flag\n        window.location.reload(); // Reload the page if not reloaded already\n      } else {\n        // If reloaded flag exists, load roles\n        this.loadRoles();\n      }\n    }\n    // Load roles from token or userData\n    loadRoles() {\n      this.oidcSecurityService.getAccessToken().subscribe(token => {\n        const decodedToken = this.decodeToken(token);\n        if (decodedToken && decodedToken.realm_access) {\n          this.userRoles = decodedToken.realm_access.roles || [];\n          this.rolesSubject.next(this.userRoles); // Update the roles subject\n        }\n      });\n    }\n    // Check if user has admin role\n    hasAdminRole() {\n      return this.userRoles.includes('ROLE_ADMIN');\n    }\n    // Check if user has developer role\n    hasDeveloperRole() {\n      return this.userRoles.includes('ROLE_DEVELOPER');\n    }\n    hasUserRole() {\n      return !this.hasAdminRole() && !this.hasDeveloperRole();\n    }\n    // Decode token function\n    decodeToken(token) {\n      try {\n        const base64Url = token.split('.')[1];\n        const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n        const jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\n          return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n        }).join(''));\n        return JSON.parse(jsonPayload);\n      } catch (error) {\n        console.error('Failed to decode token:', error);\n        return null;\n      }\n    }\n    static ɵfac = function SidebarComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || SidebarComponent)();\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SidebarComponent,\n      selectors: [[\"app-sidebar\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 17,\n      vars: 9,\n      consts: [[1, \"sidebar\", \"bg-black\", \"text-white\", \"h-screen\", \"p-6\", \"fixed\", \"top-0\", \"left-0\", \"w-64\", \"shadow-lg\"], [1, \"text-2xl\", \"font-semibold\", \"mb-6\"], [1, \"space-y-4\"], [1, \"flex\", \"items-center\", \"p-3\", \"rounded-lg\", \"hover:bg-gray-800\", \"transition\", \"ease-in-out\", \"duration-200\", 3, \"routerLink\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", \"xmlns\", \"http://www.w3.org/2000/svg\", 1, \"w-5\", \"h-5\", \"mr-3\", \"text-gray-400\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M3 5h18M3 10h18m-7 5h7\"], [1, \"text-lg\"], [4, \"ngIf\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M12 4v16m8-8H4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M9 12h6m-3-3v6\"], [\"href\", \"http://localhost:9000/swagger-ui/index.html\", \"target\", \"_blank\", 1, \"flex\", \"items-center\", \"p-3\", \"rounded-lg\", \"hover:bg-gray-800\", \"transition\", \"ease-in-out\", \"duration-200\"], [\"href\", \"http://localhost:8086\", \"target\", \"_blank\", 1, \"flex\", \"items-center\", \"p-3\", \"rounded-lg\", \"hover:bg-gray-800\", \"transition\", \"ease-in-out\", \"duration-200\"], [\"href\", \"http://localhost:3000\", \"target\", \"_blank\", 1, \"flex\", \"items-center\", \"p-3\", \"rounded-lg\", \"hover:bg-gray-800\", \"transition\", \"ease-in-out\", \"duration-200\"], [\"href\", \"http://localhost:30010\", \"target\", \"_blank\", 1, \"flex\", \"items-center\", \"p-3\", \"rounded-lg\", \"hover:bg-gray-800\", \"transition\", \"ease-in-out\", \"duration-200\"], [\"href\", \"http://localhost:8080\", \"target\", \"_blank\", 1, \"flex\", \"items-center\", \"p-3\", \"rounded-lg\", \"hover:bg-gray-800\", \"transition\", \"ease-in-out\", \"duration-200\"]],\n      template: function SidebarComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ɵɵtext(2, \"Navigation\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"ul\", 2)(4, \"li\")(5, \"a\", 3);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(6, \"svg\", 4);\n          i0.ɵɵelement(7, \"path\", 5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(8, \"span\", 6);\n          i0.ɵɵtext(9, \"Shopping\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(10, SidebarComponent_li_10_Template, 6, 2, \"li\", 7)(11, SidebarComponent_li_11_Template, 6, 2, \"li\", 7)(12, SidebarComponent_li_12_Template, 6, 0, \"li\", 7)(13, SidebarComponent_li_13_Template, 6, 0, \"li\", 7)(14, SidebarComponent_li_14_Template, 6, 0, \"li\", 7)(15, SidebarComponent_li_15_Template, 6, 0, \"li\", 7)(16, SidebarComponent_li_16_Template, 6, 0, \"li\", 7);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(8, _c0));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.hasAdminRole());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.hasAdminRole());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.hasDeveloperRole());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.hasDeveloperRole());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.hasDeveloperRole());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.hasDeveloperRole());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.hasDeveloperRole());\n        }\n      },\n      dependencies: [CommonModule, i1.NgIf, RouterModule, i2.RouterLink],\n      styles: [\".active[_ngcontent-%COMP%]{background-color:#4caf50}.sidebar[_ngcontent-%COMP%]{position:relative;z-index:1000}\", \".sidebar[_ngcontent-%COMP%] {\\n        background-color: #111111;\\n        transition: width 0.3s ease-in-out, background-color 0.3s ease;\\n        width: 256px;\\n        overflow-x: hidden;\\n    }\\n\\n    .sidebar[_ngcontent-%COMP%]:hover {\\n        width: 280px; \\n\\n        background-color: #181818;\\n    }\\n\\n    .sidebar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n        font-weight: bold;\\n        border-bottom: 2px solid rgba(255, 255, 255, 0.1);\\n        padding-bottom: 10px;\\n        margin-bottom: 20px;\\n        color: #ffffff;\\n    }\\n\\n    .sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n        position: relative;\\n        color: #b0b0b0; \\n\\n    }\\n\\n    .sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\n        color: #ffffff;\\n        background-color: rgba(255, 255, 255, 0.1);\\n    }\\n\\n    .sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%] {\\n        color: #777777; \\n\\n    }\\n\\n    .sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%] {\\n        color: #ffffff; \\n\\n    }\\n\\n    .sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]::before {\\n        content: '';\\n        position: absolute;\\n        height: 100%;\\n        width: 3px;\\n        background-color: transparent;\\n        top: 0;\\n        left: 0;\\n        transition: background-color 0.3s ease;\\n    }\\n\\n    .sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover::before {\\n        background-color: #ffffff; \\n\\n    }\"]\n    });\n  }\n  return SidebarComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
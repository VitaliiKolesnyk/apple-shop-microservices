{"ast":null,"code":"import { inject } from '@angular/core';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport { ProductService } from '../../services/product.service';\nimport { CategoryService } from '../../services/category.service';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = (a0, a1) => ({\n  \"alert-success\": a0,\n  \"alert-danger\": a1\n});\nfunction AddProductComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(3, _c0, ctx_r0.animatedMessage.type === \"success\", ctx_r0.animatedMessage.type === \"error\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.animatedMessage.type === \"success\" ? \"Success:\" : \"Error:\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.animatedMessage.text, \"\\n\");\n  }\n}\nfunction AddProductComponent_div_9_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"SKU Code is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddProductComponent_div_9_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"SKU Code must be at least 3 characters long.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddProductComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtemplate(1, AddProductComponent_div_9_div_1_Template, 2, 0, \"div\", 23)(2, AddProductComponent_div_9_div_2_Template, 2, 0, \"div\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.skuCode == null ? null : ctx_r0.skuCode.errors == null ? null : ctx_r0.skuCode.errors[\"required\"]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.skuCode == null ? null : ctx_r0.skuCode.errors == null ? null : ctx_r0.skuCode.errors[\"minlength\"]);\n  }\n}\nfunction AddProductComponent_div_14_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Name is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddProductComponent_div_14_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Name must be at least 3 characters long.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddProductComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtemplate(1, AddProductComponent_div_14_div_1_Template, 2, 0, \"div\", 23)(2, AddProductComponent_div_14_div_2_Template, 2, 0, \"div\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.name == null ? null : ctx_r0.name.errors == null ? null : ctx_r0.name.errors[\"required\"]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.name == null ? null : ctx_r0.name.errors == null ? null : ctx_r0.name.errors[\"minlength\"]);\n  }\n}\nfunction AddProductComponent_div_19_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Description is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddProductComponent_div_19_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Description must be at least 10 characters long.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddProductComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtemplate(1, AddProductComponent_div_19_div_1_Template, 2, 0, \"div\", 23)(2, AddProductComponent_div_19_div_2_Template, 2, 0, \"div\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.description == null ? null : ctx_r0.description.errors == null ? null : ctx_r0.description.errors[\"required\"]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.description == null ? null : ctx_r0.description.errors == null ? null : ctx_r0.description.errors[\"minlength\"]);\n  }\n}\nfunction AddProductComponent_div_24_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Price is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddProductComponent_div_24_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Price must be greater than 0.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddProductComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtemplate(1, AddProductComponent_div_24_div_1_Template, 2, 0, \"div\", 23)(2, AddProductComponent_div_24_div_2_Template, 2, 0, \"div\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.price == null ? null : ctx_r0.price.errors == null ? null : ctx_r0.price.errors[\"required\"]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.price == null ? null : ctx_r0.price.errors == null ? null : ctx_r0.price.errors[\"min\"]);\n  }\n}\nfunction AddProductComponent_option_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", category_r2.name);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", category_r2.name, \" \");\n  }\n}\nfunction AddProductComponent_div_32_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Category is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddProductComponent_div_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtemplate(1, AddProductComponent_div_32_div_1_Template, 2, 0, \"div\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.category == null ? null : ctx_r0.category.errors == null ? null : ctx_r0.category.errors[\"required\"]);\n  }\n}\nfunction AddProductComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtext(1, \" Please select a file. \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let AddProductComponent = /*#__PURE__*/(() => {\n  class AddProductComponent {\n    fb;\n    addProductForm;\n    productService = inject(ProductService);\n    categoryService = inject(CategoryService);\n    errorMessage = '';\n    successMessage = '';\n    selectedFile = null;\n    categories = [];\n    animatedMessage = null;\n    constructor(fb) {\n      this.fb = fb;\n      this.addProductForm = this.fb.group({\n        skuCode: ['', [Validators.required, Validators.minLength(3)]],\n        name: ['', [Validators.required, Validators.minLength(3)]],\n        description: ['', [Validators.required, Validators.minLength(10)]],\n        price: [0, [Validators.required, Validators.min(0)]],\n        category: ['', Validators.required] // category as string (ID)\n      });\n    }\n    onFileSelected(event) {\n      const input = event.target;\n      if (input.files && input.files.length > 0) {\n        this.selectedFile = input.files[0];\n      }\n    }\n    onSubmit() {\n      console.log('Form submitted:', this.addProductForm.value); // Check form values\n      console.log('Selected file:', this.selectedFile);\n      if (this.addProductForm.valid && this.selectedFile) {\n        const formData = new FormData();\n        formData.append('skuCode', this.addProductForm.get('skuCode')?.value);\n        formData.append('name', this.addProductForm.get('name')?.value);\n        formData.append('description', this.addProductForm.get('description')?.value);\n        formData.append('price', this.addProductForm.get('price')?.value);\n        formData.append('quantity', this.addProductForm.get('quantity')?.value);\n        formData.append('category', this.addProductForm.get('category')?.value); // Assuming category is a string (ID)\n        if (this.selectedFile) {\n          formData.append('thumbnail', this.selectedFile, this.selectedFile.name);\n        }\n        this.productService.createProduct(formData).subscribe({\n          next: () => {\n            this.successMessage = 'Product Created Successfully!';\n            this.errorMessage = '';\n            this.addProductForm.reset();\n            this.selectedFile = null; // Reset selected file\n          },\n          error: error => {\n            this.errorMessage = 'Product creation failed: ' + error.message;\n          }\n        });\n      } else {\n        this.errorMessage = 'Please fill all required fields and select a thumbnail image.';\n      }\n    }\n    ngOnInit() {\n      console.log('AddProductComponent initialized');\n      this.fetchCategories(); // Load categories when the component initializes\n    }\n    fetchCategories() {\n      this.categoryService.getCategories().subscribe({\n        next: categories => {\n          this.categories = categories;\n        },\n        error: error => {\n          this.errorMessage = 'Failed to load categories: ' + error.message;\n        }\n      });\n    }\n    // Getters for form controls\n    get skuCode() {\n      return this.addProductForm.get('skuCode');\n    }\n    get name() {\n      return this.addProductForm.get('name');\n    }\n    get description() {\n      return this.addProductForm.get('description');\n    }\n    get price() {\n      return this.addProductForm.get('price');\n    }\n    get quantity() {\n      return this.addProductForm.get('quantity');\n    }\n    get category() {\n      return this.addProductForm.get('category');\n    }\n    showMessage(type, text) {\n      this.animatedMessage = {\n        type,\n        text\n      };\n      // Automatically hide the message after 5 seconds\n      setTimeout(() => {\n        this.animatedMessage = null;\n      }, 5000);\n    }\n    onSuccess() {\n      this.showMessage('success', 'Your action was successful!');\n    }\n    onError() {\n      this.showMessage('error', 'Something went wrong!');\n    }\n    static ɵfac = function AddProductComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || AddProductComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AddProductComponent,\n      selectors: [[\"app-add-product\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 40,\n      vars: 10,\n      consts: [[1, \"container\", \"mx-auto\", \"p-4\"], [1, \"text-3xl\", \"font-bold\", \"mb-6\", \"text-center\", \"text-black\"], [\"class\", \"alert animate__animated animate__fadeIn\", \"role\", \"alert\", \"style\", \"transition: opacity 0.5s; opacity: 1;\", 3, \"ngClass\", 4, \"ngIf\"], [1, \"bg-white\", \"p-6\", \"rounded-lg\", \"shadow-md\", 3, \"ngSubmit\", \"formGroup\"], [1, \"mb-4\"], [\"for\", \"skuCode\", 1, \"block\", \"text-black\"], [\"type\", \"text\", \"id\", \"skuCode\", \"formControlName\", \"skuCode\", \"placeholder\", \"Enter SKU Code\", 1, \"border\", \"border-gray-300\", \"rounded\", \"w-full\", \"py-2\", \"px-3\", \"text-gray-700\", \"focus:outline-none\", \"focus:ring\", \"focus:ring-gray-400\"], [\"class\", \"text-red-500\", 4, \"ngIf\"], [\"for\", \"name\", 1, \"block\", \"text-black\"], [\"type\", \"text\", \"id\", \"name\", \"formControlName\", \"name\", \"placeholder\", \"Enter product name\", 1, \"border\", \"border-gray-300\", \"rounded\", \"w-full\", \"py-2\", \"px-3\", \"text-gray-700\", \"focus:outline-none\", \"focus:ring\", \"focus:ring-gray-400\"], [\"for\", \"description\", 1, \"block\", \"text-black\"], [\"id\", \"description\", \"formControlName\", \"description\", \"placeholder\", \"Enter product description\", 1, \"border\", \"border-gray-300\", \"rounded\", \"w-full\", \"py-2\", \"px-3\", \"text-gray-700\", \"focus:outline-none\", \"focus:ring\", \"focus:ring-gray-400\"], [\"for\", \"price\", 1, \"block\", \"text-black\"], [\"type\", \"number\", \"id\", \"price\", \"formControlName\", \"price\", \"placeholder\", \"Enter price\", 1, \"border\", \"border-gray-300\", \"rounded\", \"w-full\", \"py-2\", \"px-3\", \"text-gray-700\", \"focus:outline-none\", \"focus:ring\", \"focus:ring-gray-400\"], [\"for\", \"category\", 1, \"block\", \"text-black\"], [\"id\", \"category\", \"formControlName\", \"category\", 1, \"border\", \"border-gray-300\", \"rounded\", \"w-full\", \"py-2\", \"px-3\", \"text-gray-700\", \"focus:outline-none\", \"focus:ring\", \"focus:ring-gray-400\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"thumbnail\", 1, \"block\", \"text-black\"], [\"type\", \"file\", \"id\", \"thumbnail\", 1, \"border\", \"border-gray-300\", \"rounded\", \"w-full\", \"py-2\", \"px-3\", \"text-gray-700\", \"focus:outline-none\", \"focus:ring\", \"focus:ring-gray-400\", 3, \"change\"], [\"type\", \"submit\", 1, \"bg-black\", \"text-white\", \"px-4\", \"py-2\", \"rounded-lg\", \"hover:bg-gray-800\", \"transition-colors\", 3, \"disabled\"], [\"role\", \"alert\", 1, \"alert\", \"animate__animated\", \"animate__fadeIn\", 2, \"transition\", \"opacity 0.5s\", \"opacity\", \"1\", 3, \"ngClass\"], [1, \"text-red-500\"], [4, \"ngIf\"], [3, \"value\"]],\n      template: function AddProductComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ɵɵtext(2, \"Add Product\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(3, AddProductComponent_div_3_Template, 4, 6, \"div\", 2);\n          i0.ɵɵelementStart(4, \"form\", 3);\n          i0.ɵɵlistener(\"ngSubmit\", function AddProductComponent_Template_form_ngSubmit_4_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(5, \"div\", 4)(6, \"label\", 5);\n          i0.ɵɵtext(7, \"SKU Code\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(8, \"input\", 6);\n          i0.ɵɵtemplate(9, AddProductComponent_div_9_Template, 3, 2, \"div\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 4)(11, \"label\", 8);\n          i0.ɵɵtext(12, \"Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(13, \"input\", 9);\n          i0.ɵɵtemplate(14, AddProductComponent_div_14_Template, 3, 2, \"div\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"div\", 4)(16, \"label\", 10);\n          i0.ɵɵtext(17, \"Description\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(18, \"textarea\", 11);\n          i0.ɵɵtemplate(19, AddProductComponent_div_19_Template, 3, 2, \"div\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"div\", 4)(21, \"label\", 12);\n          i0.ɵɵtext(22, \"Price\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(23, \"input\", 13);\n          i0.ɵɵtemplate(24, AddProductComponent_div_24_Template, 3, 2, \"div\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"div\", 4)(26, \"label\", 14);\n          i0.ɵɵtext(27, \"Category\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"select\", 15)(29, \"option\", 16);\n          i0.ɵɵtext(30, \"Select Category\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(31, AddProductComponent_option_31_Template, 2, 2, \"option\", 17);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(32, AddProductComponent_div_32_Template, 2, 1, \"div\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(33, \"div\", 4)(34, \"label\", 18);\n          i0.ɵɵtext(35, \"Thumbnail\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"input\", 19);\n          i0.ɵɵlistener(\"change\", function AddProductComponent_Template_input_change_36_listener($event) {\n            return ctx.onFileSelected($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(37, AddProductComponent_div_37_Template, 2, 0, \"div\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(38, \"button\", 20);\n          i0.ɵɵtext(39, \" Add Product \");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.animatedMessage);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"formGroup\", ctx.addProductForm);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", (ctx.skuCode == null ? null : ctx.skuCode.invalid) && ((ctx.skuCode == null ? null : ctx.skuCode.dirty) || (ctx.skuCode == null ? null : ctx.skuCode.touched)));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", (ctx.name == null ? null : ctx.name.invalid) && ((ctx.name == null ? null : ctx.name.dirty) || (ctx.name == null ? null : ctx.name.touched)));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", (ctx.description == null ? null : ctx.description.invalid) && ((ctx.description == null ? null : ctx.description.dirty) || (ctx.description == null ? null : ctx.description.touched)));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", (ctx.price == null ? null : ctx.price.invalid) && ((ctx.price == null ? null : ctx.price.dirty) || (ctx.price == null ? null : ctx.price.touched)));\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", (ctx.category == null ? null : ctx.category.invalid) && ((ctx.category == null ? null : ctx.category.dirty) || (ctx.category == null ? null : ctx.category.touched)));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", !ctx.selectedFile && (ctx.addProductForm.dirty || ctx.addProductForm.touched));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", ctx.addProductForm.invalid || !ctx.selectedFile);\n        }\n      },\n      dependencies: [ReactiveFormsModule, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, CommonModule, i2.NgClass, i2.NgForOf, i2.NgIf],\n      styles: [\".container[_ngcontent-%COMP%]{background-color:#f8f8f8}.alert[_ngcontent-%COMP%]{background-color:#fff}.bg-black[_ngcontent-%COMP%]{background-color:#000}.border-gray-300[_ngcontent-%COMP%]{border-color:#d1d5db}.text-black[_ngcontent-%COMP%]{color:#000}.focus\\\\:ring-gray-400[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #9ca3af40}.hover\\\\:bg-gray-800[_ngcontent-%COMP%]:hover{background-color:#4b5563}\"]\n    });\n  }\n  return AddProductComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
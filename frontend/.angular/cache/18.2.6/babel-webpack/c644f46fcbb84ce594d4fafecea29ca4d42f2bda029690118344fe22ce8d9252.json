{"ast":null,"code":"import { inject } from '@angular/core';\nimport { OrderService } from '../services/order.service';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nconst _c0 = (a0, a1, a2) => ({\n  \"bg-green-600\": a0,\n  \"bg-yellow-500\": a1,\n  \"bg-red-500\": a2\n});\nfunction OrdersListComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"strong\");\n    i0.ɵɵtext(2, \"Error:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessage, \" \");\n  }\n}\nfunction OrdersListComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"div\", 16)(2, \"h3\", 17);\n    i0.ɵɵtext(3, \"Order Number: \");\n    i0.ɵɵelementStart(4, \"span\", 18);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"span\", 19);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"p\", 20)(9, \"strong\");\n    i0.ɵɵtext(10, \"Items Quantity:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\", 20)(13, \"strong\");\n    i0.ɵɵtext(14, \"Total Amount:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 21)(18, \"select\", 22);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function OrdersListComponent_div_17_Template_select_ngModelChange_18_listener($event) {\n      const order_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      i0.ɵɵtwoWayBindingSet(order_r3.newStatus, $event) || (order_r3.newStatus = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(19, \"option\", 7);\n    i0.ɵɵtext(20, \"NEW\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"option\", 8);\n    i0.ɵɵtext(22, \"DELIVERED\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"option\", 9);\n    i0.ɵɵtext(24, \"CANCELLED\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function OrdersListComponent_div_17_Template_button_click_25_listener() {\n      const order_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.updateOrderStatus(order_r3));\n    });\n    i0.ɵɵtext(26, \" Update \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function OrdersListComponent_div_17_Template_button_click_27_listener() {\n      const order_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.deleteOrder(order_r3.id));\n    });\n    i0.ɵɵtext(28, \" Delete \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(29, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function OrdersListComponent_div_17_Template_button_click_29_listener() {\n      const order_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.openOrderDetails(order_r3.id));\n    });\n    i0.ɵɵtext(30, \"View Details\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const order_r3 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(order_r3.orderNumber);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(9, _c0, order_r3.status === \"DELIVERED\", order_r3.status === \"NEW\", order_r3.status === \"CANCELLED\"));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(order_r3.status);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", order_r3.quantity, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" $\", i0.ɵɵpipeBind2(16, 6, order_r3.totalAmount, \"1.2-2\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", order_r3.newStatus);\n  }\n}\nfunction OrdersListComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function OrdersListComponent_div_18_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.prevPage());\n    });\n    i0.ɵɵtext(2, \"Previous\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 28);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function OrdersListComponent_div_18_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.nextPage());\n    });\n    i0.ɵɵtext(6, \"Next\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ctx_r0.currentPage === 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"Page \", ctx_r0.currentPage, \" of \", ctx_r0.totalPages, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ctx_r0.currentPage === ctx_r0.totalPages);\n  }\n}\nfunction OrdersListComponent_p_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 29);\n    i0.ɵɵtext(1, \"No orders found.\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let OrdersListComponent = /*#__PURE__*/(() => {\n  class OrdersListComponent {\n    orders = [];\n    errorMessage = '';\n    selectedStatus = '';\n    filteredOrders = [];\n    paginatedOrders = [];\n    currentPage = 1;\n    pageSize = 5; // Number of orders per page\n    totalPages = 1;\n    orderService = inject(OrderService);\n    router = inject(Router);\n    ngOnInit() {\n      this.orderService.getOrders().subscribe({\n        next: orders => {\n          console.log('Orders fetched:', orders);\n          this.orders = orders;\n          this.filterOrders();\n        },\n        error: error => {\n          this.errorMessage = 'Failed to load orders. Please try again later.';\n          console.error('Error fetching orders:', error);\n        }\n      });\n    }\n    updateOrderStatus(order) {\n      const updatedOrder = {\n        ...order,\n        status: order.newStatus\n      }; // Assign the new status\n      this.orderService.updateOrderStatus(updatedOrder).subscribe({\n        next: () => {\n          alert('Order status updated successfully');\n          // Update the status in the local orders array\n          const orderIndex = this.orders.findIndex(o => o.id === updatedOrder.id);\n          if (orderIndex > -1) {\n            this.orders[orderIndex].status = updatedOrder.status; // Update the status\n          }\n          // Re-filter and re-paginate to reflect the changes\n          this.filterOrders();\n        },\n        error: error => {\n          console.error('Failed to update order status:', error);\n          this.errorMessage = 'Failed to update order status.';\n        }\n      });\n    }\n    deleteOrder(orderId) {\n      this.orderService.deleteOrder(orderId).subscribe({\n        next: () => {\n          // Remove the deleted order from the list\n          this.orders = this.orders.filter(order => order.id !== orderId);\n          this.filterOrders();\n          alert('Order deleted successfully');\n        },\n        error: error => {\n          console.error('Failed to delete order:', error);\n          this.errorMessage = 'Failed to delete order.';\n        }\n      });\n    }\n    filterOrders() {\n      if (!this.selectedStatus) {\n        this.filteredOrders = this.orders; // Show all orders if no filter is selected\n      } else {\n        this.filteredOrders = this.orders.filter(order => order.status === this.selectedStatus);\n      }\n      this.paginateOrders(); // Re-apply pagination whenever the filter changes\n    }\n    paginateOrders() {\n      const start = (this.currentPage - 1) * this.pageSize;\n      const end = start + this.pageSize;\n      this.paginatedOrders = this.filteredOrders.slice(start, end);\n      this.totalPages = Math.ceil(this.filteredOrders.length / this.pageSize); // Calculate the total pages\n    }\n    // Pagination navigation functions\n    prevPage() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n        this.paginateOrders(); // Re-apply pagination on page change\n      }\n    }\n    nextPage() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n        this.paginateOrders(); // Re-apply pagination on page change\n      }\n    }\n    openOrderDetails(orderId) {\n      this.router.navigate(['/order-details', orderId]); // Adjust the route as necessary\n    }\n    static ɵfac = function OrdersListComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || OrdersListComponent)();\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: OrdersListComponent,\n      selectors: [[\"app-order-list\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 20,\n      vars: 5,\n      consts: [[1, \"container\", \"mx-auto\", \"p-4\"], [1, \"text-3xl\", \"font-bold\", \"mb-4\", \"text-black\", \"border-b\", \"border-gray-300\", \"pb-2\"], [\"class\", \"bg-red-100 text-red-700 border border-red-300 p-2 rounded mb-4\", 4, \"ngIf\"], [1, \"mb-4\"], [\"for\", \"statusFilter\", 1, \"block\", \"text-sm\", \"font-semibold\", \"text-gray-700\", \"mb-2\"], [\"id\", \"statusFilter\", 1, \"border\", \"border-black\", \"rounded\", \"px-2\", \"py-1\", \"bg-white\", \"text-black\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-gray-500\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"\"], [\"value\", \"NEW\"], [\"value\", \"DELIVERED\"], [\"value\", \"CANCELLED\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-2\", \"lg:grid-cols-3\", \"gap-4\"], [\"class\", \"border border-gray-300 rounded-lg p-4 transition-transform transform hover:scale-105 bg-white shadow-md\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"flex justify-center mt-4\", 4, \"ngIf\"], [\"class\", \"text-gray-500\", 4, \"ngIf\"], [1, \"bg-red-100\", \"text-red-700\", \"border\", \"border-red-300\", \"p-2\", \"rounded\", \"mb-4\"], [1, \"border\", \"border-gray-300\", \"rounded-lg\", \"p-4\", \"transition-transform\", \"transform\", \"hover:scale-105\", \"bg-white\", \"shadow-md\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-3\"], [1, \"text-lg\", \"font-semibold\", \"text-black\"], [1, \"text-gray-700\"], [1, \"px-2\", \"py-1\", \"rounded-full\", \"text-sm\", \"text-white\", 3, \"ngClass\"], [1, \"text-gray-800\"], [1, \"flex\", \"items-center\", \"mt-4\"], [1, \"border\", \"border-black\", \"rounded\", \"px-2\", \"py-1\", \"mr-2\", \"bg-white\", \"text-black\", 3, \"ngModelChange\", \"ngModel\"], [1, \"bg-black\", \"text-white\", \"px-4\", \"py-2\", \"rounded-lg\", \"hover:bg-gray-800\", \"transition-colors\", 3, \"click\"], [1, \"bg-red-600\", \"text-white\", \"px-4\", \"py-2\", \"rounded-lg\", \"ml-2\", \"hover:bg-red-500\", \"transition-colors\", 3, \"click\"], [1, \"mt-2\", \"text-black\", \"underline\", \"hover:text-gray-600\", \"transition-colors\", 3, \"click\"], [1, \"flex\", \"justify-center\", \"mt-4\"], [1, \"bg-gray-900\", \"text-white\", \"px-4\", \"py-2\", \"rounded-lg\", \"hover:bg-gray-700\", \"transition-colors\", 3, \"click\", \"disabled\"], [1, \"mx-2\", \"text-black\"], [1, \"text-gray-500\"]],\n      template: function OrdersListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ɵɵtext(2, \"Orders List\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(3, OrdersListComponent_div_3_Template, 4, 1, \"div\", 2);\n          i0.ɵɵelementStart(4, \"div\", 3)(5, \"label\", 4);\n          i0.ɵɵtext(6, \"Filter by Status\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"select\", 5);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function OrdersListComponent_Template_select_ngModelChange_7_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.selectedStatus, $event) || (ctx.selectedStatus = $event);\n            return $event;\n          });\n          i0.ɵɵlistener(\"change\", function OrdersListComponent_Template_select_change_7_listener() {\n            return ctx.filterOrders();\n          });\n          i0.ɵɵelementStart(8, \"option\", 6);\n          i0.ɵɵtext(9, \"All\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"option\", 7);\n          i0.ɵɵtext(11, \"NEW\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"option\", 8);\n          i0.ɵɵtext(13, \"DELIVERED\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"option\", 9);\n          i0.ɵɵtext(15, \"CANCELLED\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(16, \"div\", 10);\n          i0.ɵɵtemplate(17, OrdersListComponent_div_17_Template, 31, 13, \"div\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(18, OrdersListComponent_div_18_Template, 7, 4, \"div\", 12)(19, OrdersListComponent_p_19_Template, 2, 0, \"p\", 13);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedStatus);\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngForOf\", ctx.paginatedOrders);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.filteredOrders.length > 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.filteredOrders.length === 0);\n        }\n      },\n      dependencies: [CommonModule, i1.NgClass, i1.NgForOf, i1.NgIf, i1.DecimalPipe, FormsModule, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgModel],\n      styles: [\".card[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{transition:background-color .2s ease}button[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.bg-red-500[_ngcontent-%COMP%]:hover{background-color:#b91c1c}.text-gray-500[_ngcontent-%COMP%]{color:#6b7280}\"]\n    });\n  }\n  return OrdersListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}